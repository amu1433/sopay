(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ba91edbc"],{"0c7b":function(t,e,a){},"0e06":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"DrawerWidth"},[a("Row",[a("Col",{attrs:{span:"24"}},[a("Card",[a("div",[a("Button",{staticStyle:{"margin-bottom":"8px"},attrs:{type:"primary",icon:"md-add"},on:{click:t.alertAdd}},[t._v("提交问题")]),a("Table",{attrs:{loading:t.listLoading,columns:t.columnsList,data:t.tableData,tooltip:!0,border:"","disabled-hover":""}})],1),a("div",{staticClass:"margin-top-15",staticStyle:{"text-align":"center"}},[a("Page",{attrs:{total:t.tableShow.listCount,current:t.tableShow.currentPage,"page-size":t.tableShow.pageSize,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changeSize}})],1)])],1)],1),a("Drawer",{staticClass:"cms_contentModel",attrs:{"z-index":199,"class-name":"Drawer-wrap","mask-closable":!1,width:t.DrawerWidth,draggable:"",scrollable:!0},on:{"on-visible-change":t.doCancel},model:{value:t.ask.show,callback:function(e){t.$set(t.ask,"show",e)},expression:"ask.show"}},[a("p",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("新的工单")])]),a("div",[a("Card",{attrs:{shadow:""}},["message"==t.ask.action?a("div",{staticStyle:{"max-height":"500px","overflow-y":"auto","margin-bottom":"18px"}},t._l(t.messageData,(function(e,s){return a("div",{key:s,staticStyle:{"line-height":"35px"}},[e.admin_id>0?a("p",{staticStyle:{color:"firebrick","text-align":"right"}},[t._v("\n              "+t._s(e.content)),a("Tag",{attrs:{color:"success"}},[t._v("管理回复")]),a("Tag",[t._v(t._s(e.createTime))])],1):a("p",{staticStyle:{"text-align":"left"}},[a("Tag",{attrs:{color:"success"}},[t._v("我:")]),t._v(" "+t._s(e.content)),a("Tag",[t._v(t._s(e.createTime))])],1)])})),0):t._e(),a("Form",{ref:"myForm",attrs:{model:t.formItem,"label-position":"top"}},[a("FormItem",{attrs:{label:"请输入你的问题?"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:10},placeholder:"Enter something..."},model:{value:t.formItem.content,callback:function(e){t.$set(t.formItem,"content",e)},expression:"formItem.content"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary",loading:t.buttonLoading},on:{click:t.handleSubmit}},[t._v("提交")])],1)],1)],1)],1)])],1)},i=[],o=a("c24f"),n={data(){this.$createElement;return{columnsList:[{title:"ID",sortable:!0,key:"id",width:100,align:"center"},{title:"问题描述",align:"center",key:"content"},{title:"状态",align:"center",key:"sh",width:180,render:(t,e)=>{let a=0===e.row.sh?"待回复":"已回复/查看",s=0===e.row.sh?"default":"warning";return t("Tag",{attrs:{color:s},nativeOn:{click:()=>this.messageList(e.row)}},[a])}},{title:"操作时间",sortable:!0,align:"center",key:"createTime",width:120}],tableData:[],tableShow:{currentPage:1,pageSize:10,listCount:0},searchConf:{searchname:"",searchval:""},ask:{show:!1,action:"add"},messageData:[],formItem:{content:"",nid:0},query:"",buttonLoading:!1,DrawerWidth:70,listLoading:!1}},created(){let t=this,e=this.$route.query;this.query=e,t.getList()},methods:{alertAdd(){let t=this;this.ask.show=!0,this.ask.action="add",t.formItem={}},messageList(t){let e=this;e.$nextTick(()=>{this.ask.show=!0,this.ask.action="message",e.getMessageList(t),e.formItem.nid=t.id})},doCancel(t){t||(this.ask.show=!1,this.$refs["myForm"].resetFields())},handleSubmit(){let t=this;t.buttonLoading=!0,this.$refs["myForm"].validate(e=>{Object(o["e"])(t.formItem).then(e=>{t.$Message.success(e.data.msg),t.ask.show=!1,t.buttonLoading=!1,t.formItem.content="",t.getList()}).catch(()=>{t.buttonLoading=!1})})},changePage(t){this.tableShow.currentPage=t,this.getList()},changeSize(t){this.tableShow.pageSize=t,this.getList()},getMessageList(t){let e=this,a={page:e.tableShow.currentPage,size:e.tableShow.pageSize,searchname:e.searchConf.searchname,searchval:e.searchConf.searchval};a["nid"]=t.id,e.listLoading=!0,Object(o["h"])(a).then(a=>{e.messageData=a.data.data.list,e.messageData.listCount=a.data.data.count,e.listLoading=!1,e.messageData.unshift(t),console.log(e.messageData)}).catch(()=>{e.listLoading=!1})},getList(){let t=this,e={page:t.tableShow.currentPage,size:t.tableShow.pageSize,searchname:t.searchConf.searchname,searchval:t.searchConf.searchval};e=Object.assign(e,t.query),t.listLoading=!0,Object(o["h"])(e).then(e=>{t.tableData=e.data.data.list,t.tableShow.listCount=e.data.data.count,t.listLoading=!1}).catch(()=>{t.listLoading=!1})}},watch:{$route(t,e){let a=this.$route.query;this.query=a,this.getList()}}},r=n,l=(a("637d"),a("cba8")),c=Object(l["a"])(r,s,i,!1,null,"0ea38d94",null);e["default"]=c.exports},"637d":function(t,e,a){"use strict";a("0c7b")}}]);